@page "/createaccount"
@inject NavigationManager NavManager

<div id="profile-background">
    <div id="profile-bar" class="m-x-5 w-75 bg-white rounded-3 m-5 d-lg-flex flex-row justify-content-between p-1 flex-nowrap text-center">
        <h2>Create Account</h2>
    </div>
    <div id="profile-body-container" class="m-x-5 w-100 bg-white rounded-profile p-3">
        <div id="profile-description-container" class="m-x-5 w-100 bg-white rounded-profile p-3 m-y-0">
            <div id="profile-edit-container" class="flex-column justify-content-center text-center">
                <h2 class="text-center fw-bold">Enter Details:</h2>
                <EditForm Model="@cA" OnSubmit="FormSubmit">
                    <InputText id="userName" class="d-block mb-2" placeholder="New Username" @bind-Value="cA.userName" />
                    <InputText id="password" class="d-block mb-2" placeholder="Password" @bind-Value="cA.password" />
                    <InputText id="retype-pass" class="d-block mb-2" placeholder="Retype Password" @bind-Value="cA.retypedPassword" />
                    <InputText id="firstName" class="d-block mb-2" placeholder="First Name" @bind-Value="cA.firstName" />
                    <InputText id="lastName" class="d-block mb-2" placeholder="Last Name" @bind-Value="cA.lastName" />
                    <InputSelect id="accountType" class="form-control" @bind-Value="cA.accountType">
                        <option value="invalid">Select...</option>
                        <option value="student">Student</option>
                        <option value="society">Society</option>
                    </InputSelect>
                    <MudButton class="m-3" ButtonType="ButtonType.Submit">Submit</MudButton>
                </EditForm>
            </div>
        </div>
    </div>
</div>

@code {

    Data.CreateAccountModel cA = new Data.CreateAccountModel();

    private void FormSubmit()
    {
        if (cA.accountType != "invalid")
        {
            Data.MySQLDB db = new Data.MySQLDB();
            if (db.CreateUser(cA))
            {
                NavManager.NavigateTo("/");
            }
        }
        else
        {

        }

    }
}
